$((function(){"use strict";let e="../config.json?v="+Date.now();let s="../logs/novedades/"+function(e){var s=new Date(e),t=""+(s.getMonth()+1),n=""+s.getDate(),a=s.getFullYear();t.length<2&&(t="0"+t);n.length<2&&(n="0"+n);return[a,t,n].join("")}(new Date)+"_novedad.log";function t(e){fetch(e).then((async n=>{if(!n.ok)throw new Error("("+n.status+") "+n.statusText);n=await n.text(),document.getElementById("offcanvasLogsLabel").innerHTML=e+'<span class="refreshLog ms-2 border btn btn-sm" style="cursor:pointer; font-size:0.8rem; color: #ADB6BA">Actualizar</span>',document.getElementById("contentCanva").innerHTML=n,document.getElementById("verLogs").hidden=!1,$(".refreshLog").click((function(){document.getElementById("contentCanva").innerHTML="",setTimeout((function(){t(s)}),100)}))})).catch((function(n){document.getElementById("offcanvasLogsLabel").innerHTML=e,document.getElementById("contentCanva").innerHTML=n,document.getElementById("verLogs").hidden=!0,$(".refreshLog").click((function(){document.getElementById("contentCanva").innerHTML="",setTimeout((function(){t(s)}),100)}))}))}$("#form").bind("submit",(function(e){e.preventDefault(),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:$(this).serialize(),dataType:"json",beforeSend:function(e){$("#submit").prop("disabled",!0),$("#submit").html("Guardar.."),$("#spanRespuesta").html("")},success:function(e){"ok"==e.status?($("#submit").prop("disabled",!1),$("#submit").html("Guardar"),$("#spanRespuesta").html("<b>"+e.Mensaje+"</b>"),setTimeout((function(){$("#spanRespuesta").html("")}),6e3)):($("#submit").prop("disabled",!1),$("#submit").html("Guardars"),$("#spanRespuesta").html('<span class="text-danger"><b>'+e.Mensaje+"</b></span>"),setTimeout((function(){$("#spanRespuesta").html("")}),6e3))},error:function(){$("#submit").prop("disabled",!1),$("#submit").html("Guardar"),$("#spanRespuesta").html('<span class="text-danger"><b>Error</b></span>'),setTimeout((function(){$("#spanRespuesta").html("")}),6e3),t(s)}})})),fetch(e).then((e=>e.json())).then((e=>{function s(e,s){s?$(e).prop("checked",!0):$(e).prop("checked",!1)}$("#api_url").val(e.api.url),$("#api_pass").val(e.api.pass),$("#api_user").val(e.api.user),$("#mssql_srv").val(e.mssql.srv),$("#mssql_db").val(e.mssql.db),$("#mssql_user").val(e.mssql.user),$("#mssql_pass").val(e.mssql.pass),$("#logs_borrar_dias").val(e.borrarLogs.dias),$("#ws_ip").val(e.webService.url),$("#proxy_puerto").val(e.proxy.port),$("#proxy_ip").val(e.proxy.ip),s("#logs_conn_success",e.logConexion.success),s("#logs_conn_error",e.logConexion.error),s("#logs_nov_error",e.logNovedades.error),s("#logs_nov_success",e.logNovedades.success),s("#logs_borrar_estado",e.borrarLogs.estado),s("#proxy_estado",e.proxy.enabled)})),$("#script").click((function(e){e.preventDefault(),$.ajax({type:"GET",url:"../",data:"script=true",beforeSend:function(e){$("#script").prop("disabled",!0),$("#script").html("Ejecutando ......"),$("#spanRespuesta").html("Ejecutando script...")},success:function(e){"ok"==e.status?($("#script").prop("disabled",!1),$("#script").html("Ejecutar Script"),t(s),$("#spanRespuesta").html(""),$("#spanRespuesta").html("<b>"+e.Mensaje+"</b>")):($("#script").prop("disabled",!1),$("#script").html("Ejecutar Script"),t(s),$("#spanRespuesta").html(""),$("#spanRespuesta").html('<span class="text-danger"><b>'+e.Mensaje+"</b></span>"))},error:function(){$("#script").prop("disabled",!1),$("#script").html("Ejecutar Script"),t(s),$("#spanRespuesta").html(""),$("#spanRespuesta").html('<span class="text-danger"><b>Error</b></span>')}})})),t(s),document.getElementById("offcanvasLogs").addEventListener("shown.bs.offcanvas",(function(){t(s)}))}));